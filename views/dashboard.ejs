<%- include("partials/header", {title: "Pet dashboard"}); %>

<body class="puppy-paw-background">
  <%- include('partials/nav.ejs', {active: "dashboard"}) %>

  <% if (locals.messages.errors) { %>
    <div class="alertdiv" role="alert">
        <% messages.errors.forEach( el=> { %>
            <div class="alert alert-danger">
                <%= el.msg %>
            </div>
            <% }) %>
    </div>
    <% } %>

        <% if (locals.messages.info) { %>
            <div role="alert" class="infodiv">
                <% messages.info.forEach( el=> { %>
                    <div class="alert alert-danger">
                        <%= el.msg %>
                    </div>
                    <% }) %>
            </div>
            <% } %>

  <!--Pet Table-->
  <div class="px-4 py-5 mx-3 text-center">
    <h1 class="text-success mb-5">
      <%= user.userName %>'s Pet Dashboard
    </h1>
    <div class="row mb-5">
      <div class="col-lg-6 mx-auto mb-5">
        <img class="mb-2"
          src="https://www.svgrepo.com/show/163512/pets-hotel-symbol-with-a-dog-and-a-cat-in-a-circle-with-one-star.svg"
          alt="a dog and a cat in a circle" width="50" height="50">
        <h2 class="text-success mb-3">
          <%= user.userName %> has <%= petCount %> pet(s).
        </h2>
        <p class="text-muted">Attention: deleting a pet will also erase all tasks associated with it.</p>
        <div class="table-responsive-md">
          <table class="table table-hover table-sort table-arrows">
            <tr>
              <th>Name</th>
              <th>Breed</th>
              <th>Birthday</th>
              <th>Age</th>
              <th>Edit</th>
              <th>Delete</th>
            </tr>
            <% pets.forEach (el=> { %>
              <tr data-id='<%=el._id%>'>
                <td class="text-primary">
                  <%= el.petName %>
                </td>
                <td>
                  <%= el.petBreed %>
                </td>
                <td>
                  <%= el.petBirthday %>
                </td>
                <td>
                  <%= el.petAge %>
                </td>
                <td class="editpet"><button class="btn btn-success" aria-label="Edit pet" title="Edit pet"><i
                      class="fa-solid fa-pen-to-square"></i></button></td>
                <td class="delpet"><button class="btn btn-danger" aria-label="Delete pet" title="Delete pet"><i
                      class="fa-solid fa-trash"></i></button></td>
              </tr>
              <% }) %>
          </table>
        </div>
      </div>

      <!--Pet Form-->

      <div class="col-md-6 col-lg-4 mx-auto">
        <div class="card">
          <div class="card-header">
            <img class="mb-2" src="https://www.svgrepo.com/show/126218/pet.svg" alt="Pet paw" width="50" height="50">
            <h2 class="text-success mb-3">Add a pet:</h2>
          </div>
          <div class="card-content">
            <form action="/pets/createPet" method="POST" class="form-group col-11 mx-auto">
              <div class="">
                <label for="floatingPet" class="col-form-label col-form-label-lg mt-2">Enter pet name</label>
                <input type="text" placeholder="Enter pet name" name='petName' class="form-control" id="floatingPet" required>
              </div>
              <div class="">
                <label for="floatingAge" class="col-form-label col-form-label-lg mt-2">Enter pet breed</label>
                <input type=text placeholder="Enter pet breed" name='petBreed' class="form-control" id="floatingBreed" required>
              </div>
              <div class="">
                <label for="floatingBreed" class="col-form-label col-form-label-lg mt-2">Enter pet birthday</label>
                <input type="text" placeholder="Enter pet birthday" name='petBirthday' class="form-control" id="floatingBirthday" required>
              </div>
              <div class="">
                <label for="floatingBirth" class="col-form-label col-form-label-lg mt-2">Enter pet age</label>
                <input type="text" placeholder="Enter pet age" name="petAge" class="form-control" id="floatingAge" required>
              </div>
              <input type="submit" class="btn btn-lg btn-success mb-3 mt-4 w-50">
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"
      integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK"
      crossorigin="anonymous"></script>
    <script src="js/pet.js"></script>
    <script src="js/calendar.js"></script>

</body>

</html>